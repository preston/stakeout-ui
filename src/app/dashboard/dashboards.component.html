<!-- <toaster-container [toasterconfig]="toasterConfigurationService"></toaster-container> -->

<div id="dashboards" class="h-100">

    <div class="wrapper">

        <nav id="sidebar" [class.active]="sidebarActive" [class.inactive]="!sidebarActive">
            <div class="title">{{title}}</div>

            <ul class="list-unstyled components">
                <li>
                    <h4>Dashboards</h4>
                    <ul class="list-unstyled" id="dashboards_list">
                        <li *ngFor="let d of dashboards" (click)="select(d)" role="button" [routerLink]="'/dashboards/' + d.id">
                            <span *ngIf="!editing[d.id]">{{d.name}}</span>
                            <form (submit)="update(d)" role="form" class="form">
                                <div class="input-group">
                                    <input *ngIf="editing[d.id]" class="form-control form-control-sm" type="text" name="dashboard_name" [(ngModel)]="d.name" autofocus placeholder="My Dashboard" />
                                    <button *ngIf="editing[d.id]" class="btn btn-sm btn-primary" role="button" (click)="update(d)"><span class="bi-save"></span> Save</button>
                                </div>
                            </form>
                            <button *ngIf="!editing[d.id]" class="btn btn-sm" role="button" (click)="editing[d.id] = true"><span class="bi-pencil"></span></button>
                            <button *ngIf="!editing[d.id]" class="ms-auto me-0 btn btn-sm btn-default" role="button" (click)="delete(d)"><span class="bi-trash"></span></button>

                        </li>
                    </ul>
                </li>
                <button class="m-2 btn btn-sm btn-secondary " role="button " (click)="create() "><span class="bi-plus "></span> Create Dashboard</button>
            </ul>
            <hr/>
            <div class="mt-3 form-group mt-3">
                <label for="refresh">Auto-Refresh</label>
                <select class="form-control mt-1" [(ngModel)]="refresh" name="refresh">
                    <option *ngFor="let r of refresh_options" [value]="r.value"
                        [selected]="r.value == refresh">{{r.name}}</option>
                </select>
                <small *ngIf="refresh">{{last_reload | amTimeAgo}}</small>

            </div>
            <button class="mt-3 btn btn-sm btn-secondary" role="button "><span class="bi-unlock "></span> Unlock Admin</button>

        </nav>

        <div id="content">
            <button type="button" id="sidebarCollapse" class='navbar-btn' [class.active]="sidebarActive " [class.inactive]="!sidebarActive " (click)="toggleSidebar() ">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <dashboard *ngIf="dashboard_full " [dashboard]="dashboard_full"></dashboard>
        </div>
    </div>
</div>