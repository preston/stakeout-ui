@if (dashboard()) {
  <div class="container-fluid">
  <div class="float-end m-2">
    <select
      class="form-control form-control-sm"
      [ngModel]="refresh()"
      (ngModelChange)="refresh.set($event)"
      name="refresh"
      [disabled]="editable()"
    >
      @for (r of refreshOptions(); track r.value) {
        <option [ngValue]="r.value">{{ r.name }}</option>
      }
    </select>
  </div>

  <div class="btn-group float-end m-2">
    <div class="form-check form-switch">
      <input
        class="form-check-input"
        type="checkbox"
        role="button"
        name="dashboard_screenshots"
        id="dashboard_screenshots"
        [ngModel]="settingsService.screenshots()"
        (ngModelChange)="settingsService.setScreenshots($event)"
      />
      <label class="form-check-label" for="dashboard_screenshots">
        Show Screenshots
      </label>
    </div>
  </div>

  <span class="btn-group float-end m-2">
    <button
      class="btn btn-sm btn-primary"
      [class.active]="settingsService.displayMode() === 'overlay'"
      role="button"
      (click)="setDisplayMode('overlay')"
    >
      <span class="bi bi-grid"></span> Overlay
    </button>
    <button
      class="btn btn-sm btn-primary"
      [class.active]="settingsService.displayMode() === 'wide'"
      role="button"
      (click)="setDisplayMode('wide')"
    >
      <span class="bi bi-list"></span> Wide
    </button>
  </span>

  <div class="btn-group float-end m-2">
    <button class="btn btn-sm btn-primary" role="button" (click)="reload()">
      <span class="bi-arrow-clockwise"></span> Request Refresh
    </button>
  </div>

  <div class="btn-group float-end m-2">
    <button class="btn btn-sm btn-primary" role="button" (click)="sortBy('name')">
      <span class="bi bi-tag"></span>
      Name
      @if (sort() === 'name' && order() === 'asc') {
        <span class="bi bi-arrow-down"></span>
      }
      @if (sort() === 'name' && order() === 'desc') {
        <span class="bi bi-arrow-up"></span>
      }
    </button>
    <button class="btn btn-sm btn-primary" role="button" (click)="sortBy('updated_at')">
      <span class="bi bi-calendar"></span>
      Last Updated
      @if (sort() === 'updated_at' && order() === 'asc') {
        <span class="bi bi-arrow-down"></span>
      }
      @if (sort() === 'updated_at' && order() === 'desc') {
        <span class="bi bi-arrow-up"></span>
      }
    </button>
  </div>

  <h1 class="text-default">
    {{ dashboard().name }}
    @if (editable()) {
      <button class="btn btn-sm btn-primary" (click)="create()">
        <span class="bi-plus-circle"></span> Add Service
      </button>
    }
  </h1>
  @if (lastReload()) {
    <span> updated {{ lastReload() | amTimeAgo }}</span>
  }
  <div class="clearfix"></div>

  @for (s of services(); track s.id) {
    <div class="m-2 service-card align-top">
      @if (editable()) {
        <button
          role="button"
          class="btn btn-sm btn-danger delete-button"
          (click)="delete(s)"
        >
          <span class="bi-trash"></span>
        </button>
      }
      <service
        [dashboard]="dashboard()"
        [service]="s"
        (serviceUpdated)="onServiceUpdated($event)"
      ></service>
    </div>
  }
  </div>
}
