<!-- <toaster-container [toasterconfig]="toasterConfigurationService"></toaster-container> -->

<div id="dashboards" class="h-100">

    <div class="wrapper">

        <nav id="sidebar" [class.active]="sidebarActive" [class.inactive]="!sidebarActive">
            <div class="title">{{title}}</div>

            <ul class="list-unstyled components">
                <li>
                    <h4 class="mt-4">
                        <a class="" role="button" (click)="sortBy('name')">
                            <span class="bi bi-arrow-down" *ngIf="sort == 'name' && order == 'asc'"></span>
                            <span class="bi bi-arrow-up" *ngIf="sort == 'name' && order == 'desc'"></span>
                            </a>
            
                        Dashboards
                        @if(editable()) {
                        <button class="ms-1 btn btn-sm btn-primary " role="button " (click)="create() "><span
                                class="bi-plus-circle"></span> Add</button>
                        }
                    </h4>
                    <ul class="list-unstyled" id="dashboards_list">
                        <li class="my-2" *ngFor="let d of dashboards" (click)="select(d)" role="button">
                            <!-- [routerLink]="'/dashboards/' + d.id" -->
                            @if(editable()) {
                            <button *ngIf="!editing[d.id]" class="me-1 btn btn-primary btn-sm" role="button"
                                (click)="editing[d.id] = true"><span class="bi-pencil"></span></button>
                            }
                            <span *ngIf="!editing[d.id]">{{d.name}}</span>
                            @if(editable()) {
                            <form (submit)="update(d)" role="form" class="form">
                                <div class="input-group">
                                    <input *ngIf="editing[d.id]" class="form-control form-control-sm" type="text"
                                        name="dashboard_name" [(ngModel)]="d.name" autofocus
                                        placeholder="My Dashboard" />
                                    <button *ngIf="editing[d.id]" class="btn btn-sm btn-primary" role="button"
                                        (click)="update(d)"><span class="bi-save"></span> Save</button>
                                </div>
                            </form>
                            <button *ngIf="!editing[d.id]" class="mx-1 btn btn-sm btn-danger float-end" role="button"
                                (click)="delete(d)"><span class="bi-trash"></span></button>
                            }
                        </li>
                    </ul>
                </li>

            </ul>
            <hr />


            <button class="m-1 btn btn-sm btn-secondary float-end" [routerLink]="['/settings']"><span
                    class="bi bi-gear"></span></button>
            <button *ngIf="settingsService.editable" class="m-1 btn btn-sm btn-secondary float-end" (click)="lock()"><span
                class="bi bi-lock"></span> Lock Editing</button>
        </nav>

        <div id="content">
            <button type="button" id="sidebarCollapse" class='navbar-btn' [class.active]="sidebarActive "
                [class.inactive]="!sidebarActive " (click)="toggleSidebar() ">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <router-outlet></router-outlet>
            <!-- <dashboard *ngIf="dashboard_full " [dashboard]="dashboard_full"></dashboard> -->
        </div>
    </div>
</div>